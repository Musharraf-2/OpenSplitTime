<% content_for :title do %>
  <% "OpenSplitTime: Organization - #{@presenter.name}" %>
<% end %>

<% content_for(:container_type) do %>skip
<% end %>

<header class="ost-header">
  <div class="container">
    <%= render "organizations/organization_heading" %>
    <!-- Navigation -->
    <%= render "organizations/organization_tabs" %>
  </div>
</header>

<% case @presenter.display_style %>
<% when "event_series" %>
  <% if current_user&.authorized_to_edit?(@presenter.organization) %>
    <aside class="ost-toolbar">
      <div class="container">
        <div class="row">
          <div class="col offset-md-6 col-md-6">
            <%= link_to fa_icon("plus", text: "Add"), new_event_series_path(organization: @presenter.organization), id: "add-event-series", class: "btn btn-success" %>
          </div>
        </div>
      </div>
    </aside>
  <% end %>

  <article class="ost-article container">
    <% if @presenter.event_series.present? %>
      <%= render "event_series_list", event_series: @presenter.event_series %>
    <% else %>
      <h4>No event series are associated with this organization.</h4>
    <% end %>
  </article>

<% else %>

  <% if current_user&.authorized_to_edit?(@presenter.organization) %>
    <aside class="ost-toolbar">
      <div class="container">
        <div class="row">
          <div class="col">
            <%= link_to fa_icon("plus", text: "New event group"), new_organization_event_group_path(@presenter.organization), id: "add-event-group", class: "btn btn-success" %>
          </div>
        </div>
      </div>
    </aside>
  <% end %>

  <article class="ost-article container">
    <% if current_user&.authorized_to_edit?(@presenter.organization) && @presenter.concealed_event_groups.exists? %>
      <div class="p-3 border border-primary">
        <h3>Under Construction</h3>
        <%= render "event_groups/list_event_groups", presenter: @presenter, event_groups: @presenter.concealed_event_groups %>
      </div>
    <% end %>

    <% if @presenter.visible_event_groups.exists? %>
      <%= render "event_groups/list_event_groups", presenter: @presenter, event_groups: @presenter.visible_event_groups %>
    <% else %>
      <h4>No events exist yet</h4>
    <% end %>
  </article>
<% end %>
