<%# locals: (presenter:) -%>

<%= turbo_frame_tag(:preview_sync, presenter.event) do %>
  <hr/>
  <div class="row">
    <div class="col-12 col-lg-4">
      <%= render partial: "events/connections/preview_sync_detail_card", locals: { efforts: presenter.created_efforts, verb: "created" } %>
    </div>
    <div class="col-12 col-lg-4">
      <%= render partial: "events/connections/preview_sync_detail_card", locals: { efforts: presenter.updated_efforts, verb: "updated" } %>
    </div>
    <div class="col-12 col-lg-4">
      <%= render partial: "events/connections/preview_sync_detail_card", locals: { efforts: presenter.deleted_efforts, verb: "deleted" } %>
    </div>
  </div>

  <hr/>
  <div class="row">
    <div class="col-12">
      <% if presenter.syncable? %>
        <%= button_to "Sync",
                      sync_entrants_event_path(presenter.event),
                      class: "btn btn-success",
                      method: :post,
                      data: { turbo: false,
                              confirm: "This will add all accepted entrants from related sources and will permanently" +
                                " delete all withdrawn entrants and others who are not found in related sources." +
                                " This action cannot be undone. Proceed?" }
        %>
      <% else %>
        <%= button_tag "Nothing to sync", class: "btn btn-success", disabled: true %>
      <% end %>
    </div>
  </div>
<% end %>
