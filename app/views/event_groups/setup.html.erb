<% content_for :title do %>
  <% "OpenSplitTime: Setup Event Group - #{@presenter.event_group.name}" %>
<% end %>

<%= render "shared/mode_widget", event_group: @presenter.event_group %>
<%= render "setup_header", presenter: @presenter, breadcrumbs: [] %>

<% case @presenter.display_style %>
<% when "events" %>
  <article class="ost-article container">
    <aside class="ost-toolbar">
      <div class="container">
        <div class="row">
          <div class="col">
            <% if current_user&.authorized_fully?(@presenter.event_group) %>
              <%= link_to fa_icon("plus", text: "Add an event"),
                          new_event_group_event_path(@presenter.event_group),
                          id: "add-event",
                          class: "btn btn-success" %>
              <% if @presenter.events.present? %>
                <%= event_group_actions_dropdown(@presenter) %>
              <% end %>
            <% end %>
          </div>
        </div>
      </div>
    </aside>

    <div id="event_overview_cards">
      <% if @presenter.events.present? %>
        <%= render partial: "events/event_overview_card",
                   collection: @presenter.events,
                   as: :event,
                   locals: { show_grouping_button: "leave" } %>
      <% else %>
        <div class="callout callout-info">
          <h5>The next step is to add an event to this group</h5>
          <p>Click the <strong>Add an event</strong> button to add an event to this group.</p>
        </div>
      <% end %>
    </div>

    <div id="event_candidate_overview_cards">
      <% if @presenter.candidate_events.present? %>
        <hr>
        <h4><strong><%= "Events that may be added to the #{@presenter.name} group" %></strong></h4>
        <%= render partial: "events/event_overview_card",
                   collection: @presenter.candidate_events,
                   as: :event,
                   locals: { show_grouping_button: "join" } %>
      <% end %>
    </div>
  </article>

<% when "entrants" %>
  <article class="ost-article container">
    <% if @presenter.first_event.present? %>
      <%= render "entrants_roster", presenter: @presenter %>
    <% else %>
      <div class="callout callout-info">
        <h5>You will need to add an Event before adding Entrants</h5>
        <p>Click the <strong>Events</strong> tab to add an Event</p>
      </div>
    <% end %>
  </article>
<% end %>
