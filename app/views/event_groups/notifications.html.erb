<% content_for :title do %>
  <% "OpenSplitTime: Event group roster - #{@presenter.name}" %>
<% end %>

<header class="ost-header">
  <div class="container">
    <div class="ost-heading row">
      <div class="col">
        <div class="ost-title">
          <h1>
            <strong><%= @presenter.name %> <%= @presenter.concealed? ? fa_icon('eye-slash') : fa_icon('eye') %></strong>
          </h1>
          <ul class="breadcrumb breadcrumb-ost">
            <li class="breadcrumb-item"><%= link_to 'Organizations', organizations_path %></li>
            <li class="breadcrumb-item"><%= link_to @presenter.organization.name, organization_path(@presenter.organization) %></li>
            <li class="breadcrumb-item"><%= link_to @presenter.event_group.name, event_group_path(@presenter.event_group) %></li>
            <li class="breadcrumb-item active">Roster</li>
          </ul>
        </div>
        <%= render 'events/time_and_course_info' %>
      </div>
    </div>
    <!-- Navigation -->
    <%= render 'events/view_buttons', view_object: @presenter %>
  </div>
</header>

<article class="ost-article container">
  <div class="card">
    <h3 class="card-header"><strong>Subscriptions</strong></h3>
    <div class="card-body">
      <% if @presenter.subs_count_by_protocol.present? %>
        <% @presenter.subs_count_by_protocol.each do |protocol, count| %>
          <h4 class="card-text">
            <%= "#{protocol}: #{count}" %>
          </h4>
        <% end %>
      <% else %>
        <h4 class="card-text">No subscriptions exist for this event group.</h4>
      <% end %>
    </div>
  </div>

  <br/>

  <div class="card">
    <h3 class="card-header"><strong>Notifications</strong></h3>
    <div class="card-body">
      <h4 class="card-text"><%= "Total sent: #{@presenter.notifications_count}" %></h4>
      <h4 class="card-text"><%= "Subject entrants: #{@presenter.efforts_noticed_count}" %></h4>
      <h4 class="card-text"><%= "Subject distances: #{@presenter.distances_noticed_count}" %></h4>
    </div>
  </div>
</article>
