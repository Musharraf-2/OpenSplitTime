<%# locals: (presenter:) -%>

<div id="<%= dom_id presenter, :split_times_list %>">
  <table class="table table-striped">
    <thead>
    <tr>
      <th>Split</th>
      <th class="text-end"><%= pdu('singular').titleize %></th>
      <th class="text-center">Time of Day</th>
      <th class="text-center">Elapsed Time</th>
      <% unless presenter.simple? %>
        <th class="text-center">Segment Time</th>
      <% end %>
      <% if presenter.multiple_sub_splits? %>
        <th class="text-end">In Aid</th>
      <% end %>
      <% if presenter.multiple_laps? %>
        <th class="text-end">Lap Time</th>
      <% end %>
      <% if current_user&.authorized_to_edit?(presenter.effort) %>
        <th class="text-center">Confirm</th>
        <th class="text-center">Delete</th>
      <% end %>
    </tr>
    </thead>

    <tbody>
    <% presenter.lap_split_rows.each do |row| %>
      <tr>
        <td><%= strong_conditional row.name, row.done? %></td>
        <td class="text-end"><%= strong_conditional d(row.distance_from_start), row.done? %></td>
        <td class="text-center"><%= strong_conditional time_cluster_display_data(row.time_cluster, :ampm_with_seconds, with_status: true), row.done? %></td>
        <td class="text-center"><%= strong_conditional time_cluster_display_data(row.time_cluster, :elapsed, with_status: true), row.done? %></td>
        <% unless presenter.simple? %>
          <td class="text-center"><%= strong_conditional time_cluster_display_data(row.time_cluster, :segment, with_status: true), row.done? %></td>
        <% end %>
        <% if presenter.multiple_sub_splits? %>
          <td class="text-end"><%= strong_text_conditional time_format_minutes(presenter.total_time_in_aid), time_format_minutes(row.time_in_aid), row.finish? %></td>
        <% end %>
        <% if presenter.multiple_laps? %>
          <td class="text-end">
            <% if row.finish? %><%= strong_conditional lap_time_text(presenter, row), true %>
            <% end %>
          </td>
        <% end %>
        <% if current_user&.authorized_to_edit?(presenter.effort) %>
          <td class="table-button">
            <% effort_row_confirm_buttons(row, presenter.effort) %></td>
          <td class="table-button">
            <% effort_row_delete_buttons(row, presenter.effort) %></td>
        <% end %>
      </tr>
    <% end %>
    </tbody>
  </table>
</div>
