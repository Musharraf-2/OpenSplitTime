<%# locals: (presenter:) -%>

<aside class="ost-toolbar">
  <div class="container">
    <div class="row">
      <div class="col">
        <%= link_to fa_icon("plus", text: "Add a partner"),
                    new_organization_lottery_partner_path(presenter.organization, presenter.lottery),
                    id: "add-partner",
                    class: "btn btn-success" %>
      </div>
    </div>
  </div>
</aside>

<% if presenter.partners.present? %>
  <table class="table table-striped">
    <thead>
    <tr>
      <th>Name</th>
      <th>Banner</th>
      <th>Banner Link</th>
      <th class="text-center">Weight</th>
      <th class="text-center">Actions</th>
    </tr>
    </thead>
    <tbody>
    <% presenter.partners.each do |partner| %>
      <tr id="<%= dom_id(partner) %>" class="align-middle">
        <td><%= partner.name %></td>
        <td><%= image_tag partner.banner.variant(:banner_small) if partner.banner.attached? %></td>
        <td><%= link_to partner.banner_link, url_with_protocol(partner.banner_link), target: "_blank" if partner.banner_link %></td>
        <td class="text-center"><%= partner.weight %></td>
        <td class="text-center">
          <%= render "partners/actions_kebab", partnerable: presenter.lottery, partner: partner %>
        </td>
      </tr>
    <% end %>
    </tbody>
  </table>

<% else %>
  <br/>
  <h5>No partners have been added yet.</h5>
<% end %>
